# Webå®‰å…¨æ™ºèƒ½é˜²æŠ¤ä¸å“åº”å¹³å° (WSIRP)

[![Stars](https://img.shields.io/github/stars/your-team/wsirp?style=social)](https://github.com/your-team/wsirp)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org)
[![Vue](https://img.shields.io/badge/vue-3.x-green.svg)](https://vuejs.org)

![ç³»ç»Ÿæ¶æ„å›¾](./screenshots/architecture.png)
![ç³»ç»Ÿç•Œé¢](./screenshots/dashboard.png)

## ğŸ“– é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
éšç€æ•°å­—ç»æµçš„è“¬å‹ƒå‘å±•ï¼Œä¼ä¸šæ•°å­—åŒ–è½¬å‹è¿›ç¨‹ä¸æ–­åŠ å¿«ï¼ŒWebåº”ç”¨ç³»ç»Ÿåœ¨ä¼ä¸šè¿è¥ä¸­æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚ç„¶è€Œï¼Œä¼´éšè€Œæ¥çš„å®‰å…¨å¨èƒä¹Ÿæ—¥ç›Šä¸¥å³»ï¼š

1. **å®‰å…¨å½¢åŠ¿ä¸¥å³»**
   - 2022å¹´å…¨çƒWebåº”ç”¨æ”»å‡»å¢é•¿178%
   - é›¶æ—¥æ¼æ´åˆ©ç”¨æ—¶é—´ä»å‘ç°åˆ°æ”»å‡»ç¼©çŸ­è‡³24å°æ—¶å†…
   - è¶…è¿‡60%çš„æ•°æ®æ³„éœ²äº‹ä»¶æºäºWebåº”ç”¨æ¼æ´

2. **ä¼ ç»Ÿé˜²æŠ¤ä¸è¶³**
   - äººå·¥å®‰å…¨æ£€æµ‹æ•ˆç‡ä½ä¸‹ï¼Œæ— æ³•åº”å¯¹æµ·é‡å¨èƒ
   - è¢«åŠ¨é˜²å¾¡æ¨¡å¼å¯¼è‡´é˜²æŠ¤æ»åï¼Œéš¾ä»¥é¢„é˜²æœªçŸ¥å¨èƒ
   - å®‰å…¨å·¥å…·åˆ†æ•£ï¼Œç¼ºä¹ç»Ÿä¸€çš„å®‰å…¨æ€åŠ¿ç®¡ç†

3. **ä¼ä¸šéœ€æ±‚è¿«åˆ‡**
   - éœ€è¦æ›´æ™ºèƒ½ã€è‡ªåŠ¨åŒ–çš„å®‰å…¨é˜²æŠ¤æ–¹æ¡ˆ
   - è¦æ±‚æ›´å¿«é€Ÿçš„å¨èƒå‘ç°å’Œå“åº”èƒ½åŠ›
   - æœŸæœ›æ›´å…¨é¢çš„å®‰å…¨æ€åŠ¿æ„ŸçŸ¥èƒ½åŠ›

åŸºäºä»¥ä¸ŠèƒŒæ™¯ï¼Œæœ¬é¡¹ç›®ç«‹è¶³äºè§£å†³ä¼ä¸šåœ¨Webå®‰å…¨é¢†åŸŸé¢ä¸´çš„å®é™…é—®é¢˜ï¼Œé‡‡ç”¨äººå·¥æ™ºèƒ½ã€å¤§æ•°æ®åˆ†æç­‰å‰æ²¿æŠ€æœ¯ï¼Œæ‰“é€ æ–°ä¸€ä»£æ™ºèƒ½åŒ–çš„Webå®‰å…¨é˜²æŠ¤å¹³å°ã€‚é€šè¿‡å°†ä¼ ç»Ÿå®‰å…¨èƒ½åŠ›ä¸ç°ä»£æ™ºèƒ½æŠ€æœ¯ç›¸ç»“åˆï¼Œä¸ºä¼ä¸šæä¾›å…¨æ–¹ä½ã€æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–çš„å®‰å…¨é˜²æŠ¤è§£å†³æ–¹æ¡ˆã€‚

### é¡¹ç›®ç‰¹æ€§
- ğŸ”’ **å…¨é¢é˜²æŠ¤**: è¦†ç›–OWASP Top 10å®‰å…¨é£é™©
- ğŸ¤– **AIé©±åŠ¨**: åŸºäºæ·±åº¦å­¦ä¹ çš„æ™ºèƒ½å¨èƒæ£€æµ‹
- âš¡ **å®æ—¶å“åº”**: æ¯«ç§’çº§å¨èƒæ£€æµ‹ä¸é˜²æŠ¤
- ğŸ“Š **å¯è§†åˆ†æ**: å¤šç»´åº¦å®‰å…¨æ€åŠ¿å±•ç¤º
- ğŸ”„ **æŒç»­è¿›åŒ–**: è‡ªå­¦ä¹ çš„å®‰å…¨é˜²æŠ¤ä½“ç³»
- ğŸŒ **åˆ†å¸ƒå¼æ¶æ„**: æ”¯æŒå¤§è§„æ¨¡éƒ¨ç½²ä¸æ‰©å±•
- ğŸ“± **å¤šç«¯æ”¯æŒ**: Webã€ç§»åŠ¨ç«¯å®Œæ•´é€‚é…

### æŠ€æœ¯æ¶æ„
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    å‰ç«¯å±•ç¤ºå±‚    â”‚
                    â”‚  Vue3 + TypeScript â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    ç½‘å…³å±‚      â”‚
                    â”‚   Nginx/Kong    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”´â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚    â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è®¤è¯æœåŠ¡     â”‚  â”‚  ä¸šåŠ¡æœåŠ¡é›†ç¾¤  â”‚  â”‚     AIåˆ†æé›†ç¾¤      â”‚
â”‚ OAuth2.0/JWT  â”‚  â”‚   FastAPI     â”‚  â”‚ TensorFlow/PyTorch  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    æ•°æ®å­˜å‚¨å±‚      â”‚    â”‚   æ¶ˆæ¯é˜Ÿåˆ—/ç¼“å­˜   â”‚
         â”‚ MySQL/MongoDB     â”‚    â”‚ Redis/RabbitMQ   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-team/wsirp.git
cd wsirp
```

2. **ç¯å¢ƒå‡†å¤‡**
```bash
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
.\venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
npm install
```

3. **é…ç½®æ–‡ä»¶**
```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

4. **å¯åŠ¨æœåŠ¡**
```bash
# åç«¯æœåŠ¡
python manage.py runserver

# å‰ç«¯å¼€å‘æœåŠ¡
npm run dev
```

### å¼€å‘è§„èŒƒ

#### ä»£ç é£æ ¼
- åç«¯éµå¾ª[PEP 8](https://www.python.org/dev/peps/pep-0008/)è§„èŒƒ
- å‰ç«¯éµå¾ª[Vue Style Guide](https://v3.vuejs.org/style-guide/)
- ä½¿ç”¨ESLint + Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–

#### Gitæäº¤è§„èŒƒ
```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„ä»£ç 
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

#### å®‰å…¨å¼€å‘è§„èŒƒ
- æ‰€æœ‰APIå¿…é¡»è¿›è¡Œè®¤è¯å’Œæˆæƒ
- æ•æ„Ÿæ•°æ®å¿…é¡»åŠ å¯†å­˜å‚¨
- å®šæœŸè¿›è¡Œä¾èµ–åŒ…å®‰å…¨æ›´æ–°
- å¿…é¡»è¿›è¡Œè¾“å…¥éªŒè¯å’Œè¾“å‡ºè½¬ä¹‰
- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥

### æµ‹è¯•ä¸éƒ¨ç½²

#### è‡ªåŠ¨åŒ–æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
python -m pytest tests/

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

#### Dockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤Pull Request

### ç‰ˆæœ¬å‘å¸ƒ

ä½¿ç”¨[è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/)è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼š
- MAJOR.MINOR.PATCH
- MAJOR: ä¸å…¼å®¹çš„APIä¿®æ”¹
- MINOR: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- PATCH: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

### è”ç³»æˆ‘ä»¬

- é¡¹ç›®è´Ÿè´£äºº: [name](mailto:email@example.com)
- æŠ€æœ¯æ”¯æŒ: [support@example.com](mailto:support@example.com)
- é¡¹ç›®ä¸»é¡µ: [https://github.com/your-team/wsirp](https://github.com/your-team/wsirp)

## ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. æ™ºèƒ½è®¤è¯ä¸­å¿ƒ
- å¤šå› ç´ èº«ä»½è®¤è¯
- åŸºäºè¡Œä¸ºçš„èº«ä»½è¯†åˆ«
- ç»†ç²’åº¦RBACæƒé™ç®¡ç†
- å…¨æ–¹ä½å®¡è®¡æ—¥å¿—
- å•ç‚¹ç™»å½•(SSO)æ”¯æŒ
- OAuth2.0ç¤¾äº¤ç™»å½•

**æŠ€æœ¯æ ˆ**:
- å‰ç«¯: Vue3 + TypeScript + Element Plus
- åç«¯: Python FastAPI
- æ•°æ®åº“: MySQL 8.0
- è®¤è¯: OAuth2.0 + JWT
- ç¼“å­˜: Redis
- æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ
- ç›‘æ§: Prometheus + Grafana

### 2. AIé©±åŠ¨çš„æ¼æ´æ‰«æå¼•æ“
- æ™ºèƒ½çˆ¬è™«æŠ€æœ¯
- æ·±åº¦å­¦ä¹ æ¼æ´è¯†åˆ«
- è‡ªé€‚åº”æ‰«æç­–ç•¥
- è¯¯æŠ¥æ™ºèƒ½è¿‡æ»¤
- å®æ—¶æ‰«æç›‘æ§

**åˆ›æ–°ç‰¹æ€§**:
- åŸºäºCNNçš„æ¼æ´ç‰¹å¾æå–
- æ™ºèƒ½åŒ–æ‰«æè·¯å¾„è§„åˆ’
- åŠ¨æ€éªŒè¯æœºåˆ¶
- è‡ªå­¦ä¹ è§„åˆ™å¼•æ“

### 3. æ™ºèƒ½æ”»é˜²æ¼”ç»ƒå¹³å°
- è‡ªåŠ¨åŒ–æ¸—é€æµ‹è¯•
- æ”»å‡»é“¾è·¯åˆ†æ
- å¨èƒæƒ…æŠ¥èåˆ
- åœºæ™¯åŒ–æ”»é˜²æ¼”ç»ƒ

**æ ¸å¿ƒèƒ½åŠ›**:
- é›†æˆOWASP TOP10æ£€æµ‹
- è‡ªå®šä¹‰æ”»å‡»è„šæœ¬æ¡†æ¶
- æ™ºèƒ½åŒ–æ”»å‡»è·¯å¾„æ¨è
- æ”»å‡»æ•ˆæœè¯„ä¼°ä½“ç³»

### 4. è‡ªåŠ¨åŒ–åº”æ€¥å“åº”
- æ™ºèƒ½åŒ–æ¼æ´ä¿®å¤
- è‡ªåŠ¨åŒ–åº”æ€¥å¤„ç½®
- å®‰å…¨åŸºçº¿æ ¸æŸ¥
- ä¿®å¤æ•ˆæœéªŒè¯

**åˆ›æ–°ä»·å€¼**:
- AIè¾…åŠ©ä»£ç ä¿®å¤å»ºè®®
- è‡ªåŠ¨åŒ–è¡¥ä¸éƒ¨ç½²
- ä¿®å¤çŸ¥è¯†å›¾è°±
- é—­ç¯éªŒè¯æœºåˆ¶

### 5. å®‰å…¨æ€åŠ¿æ„ŸçŸ¥
- å¤šç»´åº¦ç›‘æ§é¢„è­¦
- æ™ºèƒ½åŒ–äº‹ä»¶åˆ†æ
- å¯è§†åŒ–æ€åŠ¿å±•ç¤º
- é¢„æµ‹æ€§é˜²å¾¡

**æŠ€æœ¯æ¶æ„**:
- Elasticsearché›†ç¾¤
- Grafanaå¯è§†åŒ–
- AIé¢„è­¦æ¨¡å‹
- åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶

## ğŸŒŸ é¡¹ç›®ä»·å€¼

### è¡Œä¸šåº”ç”¨ä»·å€¼
- æå‡ä¼ä¸šå®‰å…¨é˜²æŠ¤èƒ½åŠ›
- é™ä½å®‰å…¨è¿è¥æˆæœ¬
- åŠ é€Ÿå®‰å…¨å“åº”æ•ˆç‡
- æ„å»ºä¸»åŠ¨é˜²å¾¡ä½“ç³»
- ä¼˜åŒ–å®‰å…¨è¿è¥æµç¨‹
- æé«˜å®‰å…¨ç®¡ç†æ•ˆç‡

### åˆ›æ–°çªç ´
- AIç®—æ³•åœ¨å®‰å…¨é¢†åŸŸçš„åˆ›æ–°åº”ç”¨
- è‡ªåŠ¨åŒ–å“åº”æœºåˆ¶çš„çªç ´
- æ™ºèƒ½åŒ–å†³ç­–æ”¯æŒç³»ç»Ÿ
- æ–°ä¸€ä»£å®‰å…¨é˜²æŠ¤ç†å¿µ

### ç¤¾ä¼šè´¡çŒ®
- ä¿ƒè¿›ç½‘ç»œç©ºé—´å®‰å…¨å»ºè®¾
- æ¨åŠ¨å®‰å…¨æŠ€æœ¯å‘å±•
- åŸ¹å…»ç½‘ç»œå®‰å…¨äººæ‰
- æå‡äº§ä¸šæ•°å­—åŒ–æ°´å¹³

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Python >= 3.8
- Node.js >= 16
- MySQL >= 8.0
- Redis >= 6.0
- RabbitMQ >= 3.8
- Docker >= 20.10
- Docker Compose >= 2.0

## ğŸ’» ç³»ç»Ÿå®ç°

### è¯¦ç»†æ¶æ„è®¾è®¡
```
â”œâ”€â”€ frontend/                # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/  # æ§åˆ¶å°
â”‚   â”‚   â”‚   â”œâ”€â”€ scan/       # æ‰«æç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ report/     # æŠ¥å‘Šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ components/     # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ backend/                # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ scanner/       # æ‰«æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ detector/      # æ£€æµ‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ analyzer/      # åˆ†ææ¨¡å—
â”‚   â””â”€â”€ models/            # æ•°æ®æ¨¡å‹
â””â”€â”€ deploy/                # éƒ¨ç½²é…ç½®
    â”œâ”€â”€ docker/           # Dockeré…ç½®
    â””â”€ kubernetes/       # K8sé…ç½®
```

### æ•°æ®åº“è®¾è®¡
```sql
-- ç›®æ ‡èµ„äº§è¡¨
CREATE TABLE targets (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    url VARCHAR(255) NOT NULL,
    name VARCHAR(100),
    type VARCHAR(50),
    status TINYINT DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_url (url),
    INDEX idx_status (status)
);

-- æ¼æ´ä¿¡æ¯è¡¨
CREATE TABLE vulnerabilities (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    target_id BIGINT NOT NULL,
    type VARCHAR(50) NOT NULL,
    severity ENUM('low', 'medium', 'high', 'critical'),
    description TEXT,
    solution TEXT,
    status TINYINT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (target_id) REFERENCES targets(id),
    INDEX idx_severity (severity),
    INDEX idx_type (type)
);
```

### APIæ¥å£è®¾è®¡
```python
# api/routes/scan.py
from fastapi import APIRouter, Depends
from typing import List

router = APIRouter()

@router.post("/scan/start")
async def start_scan(target: ScanTarget, current_user: User = Depends(get_current_user)):
    """å¯åŠ¨æ‰«æä»»åŠ¡"""
    task = await scanner.create_task(target, current_user)
    return {"task_id": task.id}

@router.get("/scan/{task_id}/status")
async def get_scan_status(task_id: int):
    """è·å–æ‰«æçŠ¶æ€"""
    status = await scanner.get_task_status(task_id)
    return {"status": status}
```

### å‰ç«¯å®ç°
```typescript
// src/views/scan/ScanManager.vue
<template>
  <div class="scan-manager">
    <el-card>
      <template #header>
        <div class="card-header">
          <span>æ‰«æä»»åŠ¡ç®¡ç†</span>
          <el-button type="primary" @click="startNewScan">
            æ–°å»ºæ‰«æ
          </el-button>
        </div>
      </template>
      
      <el-table :data="scanTasks" v-loading="loading">
        <el-table-column prop="id" label="ä»»åŠ¡ID" width="100" />
        <el-table-column prop="target" label="ç›®æ ‡" />
        <el-table-column prop="status" label="çŠ¶æ€">
          <template #default="{ row }">
            <scan-status :status="row.status" />
          </template>
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="200">
          <template #default="{ row }">
            <el-button @click="viewDetails(row)">æŸ¥çœ‹</el-button>
            <el-button type="danger" @click="stopScan(row)">
              åœæ­¢
            </el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-card>
  </div>
</template>

<script lang="ts">
import { defineComponent, ref, onMounted } from 'vue'
import { ElMessage } from 'element-plus'
import { getScanTasks, startScan, stopScan } from '@/api/scan'

export default defineComponent({
  name: 'ScanManager',
  setup() {
    const scanTasks = ref([])
    const loading = ref(false)

    const loadTasks = async () => {
      loading.value = true
      try {
        scanTasks.value = await getScanTasks()
      } catch (error) {
        ElMessage.error('åŠ è½½ä»»åŠ¡å¤±è´¥')
      }
      loading.value = false
    }

    onMounted(loadTasks)

    return {
      scanTasks,
      loading,
      startNewScan: async () => {
        // å®ç°æ–°å»ºæ‰«æé€»è¾‘
      },
      stopScan: async (task) => {
        // å®ç°åœæ­¢æ‰«æé€»è¾‘
      }
    }
  }
})
</script>
```

### Windowsç¯å¢ƒå¿«é€Ÿå¼€å§‹

1. **å®‰è£…å¿…è¦çš„è½¯ä»¶**
```powershell
# å®‰è£… Python 3.8+
# ä» https://www.python.org/downloads/ ä¸‹è½½å¹¶å®‰è£…

# å®‰è£… Node.js 16+
# ä» https://nodejs.org/download/ ä¸‹è½½å¹¶å®‰è£…

# å®‰è£… Git
# ä» https://git-scm.com/download/win ä¸‹è½½å¹¶å®‰è£…
```

2. **å…‹éš†é¡¹ç›®**
```powershell
# æ‰“å¼€ PowerShell æˆ– CMD
git clone https://github.com/your-team/wsirp.git
cd wsirp
```

3. **é…ç½®Pythonç¯å¢ƒ**
```powershell
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\venv\Scripts\activate

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

4. **é…ç½®Nodeç¯å¢ƒ**
```powershell
# å®‰è£…å‰ç«¯ä¾èµ–
npm install
```

5. **é…ç½®æ•°æ®åº“**
```powershell
# å®‰è£… MySQL 8.0
# ä» https://dev.mysql.com/downloads/installer/ ä¸‹è½½å¹¶å®‰è£…

# å®‰è£… Redis for Windows
# ä» https://github.com/microsoftarchive/redis/releases ä¸‹è½½å¹¶å®‰è£…

# å¯åŠ¨RedisæœåŠ¡
net start redis

# å®‰è£… RabbitMQ
# ä» https://www.rabbitmq.com/install-windows.html ä¸‹è½½å¹¶å®‰è£…
```

6. **ç¯å¢ƒé…ç½®**
```powershell
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
copy .env.example .env

# ä½¿ç”¨è®°äº‹æœ¬ç¼–è¾‘ .env æ–‡ä»¶
notepad .env

# é…ç½®ä»¥ä¸‹å¿…è¦å‚æ•°:
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=wsirp
# DB_USER=your_username
# DB_PASSWORD=your_password
# REDIS_HOST=localhost
# REDIS_PORT=6379
# RABBITMQ_HOST=localhost
```

7. **åˆå§‹åŒ–æ•°æ®åº“**
```powershell
# åˆ›å»ºæ•°æ®åº“
python manage.py db:create

# è¿è¡Œæ•°æ®åº“è¿ç§»
python manage.py db:migrate
```

8. **å¯åŠ¨æœåŠ¡**
```powershell
# å¯åŠ¨åç«¯æœåŠ¡ (åœ¨ä¸€ä¸ªæ–°çš„ PowerShell çª—å£ä¸­)
python manage.py runserver

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (åœ¨å¦ä¸€ä¸ªæ–°çš„ PowerShell çª—å£ä¸­)
npm run dev
```

9. **è®¿é—®åº”ç”¨**
- å‰ç«¯é¡µé¢: http://localhost:3000
- APIæ–‡æ¡£: http://localhost:8000/docs

### Windowsç¯å¢ƒæ•…éšœæ’é™¤

1. **Pythonç›¸å…³é—®é¢˜**
```powershell
# å¦‚æœæç¤º"æ— æ³•åŠ è½½æ–‡ä»¶ xxx.ps1,å› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬"
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# å¦‚æœå®‰è£…åŒ…æ—¶å‡ºç°ç½‘ç»œé—®é¢˜,å¯ä»¥ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

2. **Node.jsç›¸å…³é—®é¢˜**
```powershell
# å¦‚æœnpmå®‰è£…è¿‡æ…¢,å¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com
npm install

# å¦‚æœå‡ºç°node-gypç›¸å…³é”™è¯¯,éœ€è¦å®‰è£…æ„å»ºå·¥å…·
npm install --global --production windows-build-tools
```

3. **æ•°æ®åº“ç›¸å…³é—®é¢˜**
```powershell
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
net start mysql

# æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
net start redis

# æ£€æŸ¥RabbitMQæœåŠ¡çŠ¶æ€
net start RabbitMQ
```

### Windowså¼€å‘å·¥å…·æ¨è

- IDE: Visual Studio Code
  - æ¨èæ’ä»¶:
    - Python
    - Vetur (Vueå·¥å…·)
    - ESLint
    - Prettier
    - GitLens
    
- æ•°æ®åº“å·¥å…·: Navicat Premium
- APIæµ‹è¯•: Postman
- Gitå®¢æˆ·ç«¯: SourceTree

### Windowsæ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **Pythonä¼˜åŒ–**
```powershell
# ä½¿ç”¨pypy3æå‡æ€§èƒ½
pip install pypy3

# å¯ç”¨uvicornå¤šå·¥ä½œè¿›ç¨‹
uvicorn main:app --workers 4
```

2. **Node.jsä¼˜åŒ–**
```powershell
# ç”Ÿäº§ç¯å¢ƒæ„å»º
npm run build

# ä½¿ç”¨pm2ç®¡ç†è¿›ç¨‹
npm install -g pm2
pm2 start npm -- start
```

### æ ¸å¿ƒåŠŸèƒ½å®ç°ç¤ºä¾‹

#### 1. AIæ¨¡å‹è®­ç»ƒä¸éƒ¨ç½²
```python
# backend/app/core/ai/model.py
import torch
import torch.nn as nn
from transformers import BertModel

class SecurityDetectionModel(nn.Module):
    def __init__(self):
        super().__init__()
        self.bert = BertModel.from_pretrained('bert-base-uncased')
        self.classifier = nn.Linear(768, 4)  # 4ç±»å®‰å…¨å¨èƒåˆ†ç±»
        
    def forward(self, input_ids, attention_mask):
        outputs = self.bert(input_ids=input_ids, attention_mask=attention_mask)
        return self.classifier(outputs.pooler_output)

# æ¨¡å‹è®­ç»ƒ
def train_model(train_loader, model, optimizer, epochs=5):
    model.train()
    for epoch in range(epochs):
        for batch in train_loader:
            optimizer.zero_grad()
            input_ids = batch['input_ids']
            attention_mask = batch['attention_mask']
            labels = batch['labels']
            
            outputs = model(input_ids, attention_mask)
            loss = nn.CrossEntropyLoss()(outputs, labels)
            
            loss.backward()
            optimizer.step()
```

#### 2. å®æ—¶å¨èƒæ£€æµ‹
```python
# backend/app/core/detector/realtime.py
from fastapi import WebSocket
import asyncio
import json

class ThreatDetector:
    def __init__(self):
        self.model = SecurityDetectionModel()
        self.model.load_state_dict(torch.load('model.pth'))
        self.model.eval()
        
    async def detect_threats(self, websocket: WebSocket):
        await websocket.accept()
        try:
            while True:
                data = await websocket.receive_text()
                threat = await self.analyze_threat(json.loads(data))
                if threat['severity'] > 0.7:  # é«˜å±å¨èƒ
                    await self.trigger_alert(threat)
                await websocket.send_json(threat)
        except Exception as e:
            logger.error(f"Detection error: {e}")
            
    async def analyze_threat(self, data):
        # å®æ—¶å¨èƒåˆ†æé€»è¾‘
        return {
            'type': 'sql_injection',
            'severity': 0.95,
            'details': 'æ£€æµ‹åˆ°SQLæ³¨å…¥æ”»å‡»å°è¯•'
        }
```

#### 3. è‡ªåŠ¨åŒ–æ¼æ´ä¿®å¤
```python
# backend/app/core/repair/auto_fix.py
from typing import Dict
import ast

class VulnerabilityFixer:
    def __init__(self):
        self.fix_patterns = self.load_fix_patterns()
        
    def fix_vulnerability(self, code: str, vuln_type: str) -> str:
        tree = ast.parse(code)
        fixer = self.fix_patterns.get(vuln_type)
        if fixer:
            return fixer(tree)
        return code
        
    def fix_sql_injection(self, tree: ast.AST) -> str:
        # SQLæ³¨å…¥ä¿®å¤é€»è¾‘
        return "SELECT * FROM users WHERE id = %s"
        
    def fix_xss(self, tree: ast.AST) -> str:
        # XSSä¿®å¤é€»è¾‘
        return "html.escape(user_input)"
```

#### 4. å®‰å…¨æ€åŠ¿å¤§å±
```typescript
// frontend/src/views/dashboard/SecurityDashboard.vue
<template>
  <div class="security-dashboard">
    <el-row :gutter="20">
      <el-col :span="8">
        <threat-trend-chart :data="threatTrend" />
      </el-col>
      <el-col :span="8">
        <vulnerability-distribution :data="vulnDist" />
      </el-col>
      <el-col :span="8">
        <alert-list :alerts="recentAlerts" />
      </el-col>
    </el-row>
    
    <el-row :gutter="20">
      <el-col :span="16">
        <attack-map :attacks="attackData" />
      </el-col>
      <el-col :span="8">
        <risk-score-card :score="riskScore" />
      </el-col>
    </el-row>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useSecurityStore } from '@/stores/security'
import ThreatTrendChart from './components/ThreatTrendChart.vue'
import VulnerabilityDistribution from './components/VulnDistribution.vue'
import AttackMap from './components/AttackMap.vue'
import RiskScoreCard from './components/RiskScoreCard.vue'
import AlertList from './components/AlertList.vue'

const securityStore = useSecurityStore()
const threatTrend = ref([])
const vulnDist = ref([])
const attackData = ref([])
const riskScore = ref(0)
const recentAlerts = ref([])

onMounted(async () => {
  await securityStore.fetchSecurityData()
  threatTrend.value = securityStore.threatTrend
  vulnDist.value = securityStore.vulnerabilityDistribution
  attackData.value = securityStore.attackData
  riskScore.value = securityStore.riskScore
  recentAlerts.value = securityStore.recentAlerts
})
</script>
```

#### 5. å®‰å…¨çŸ¥è¯†å›¾è°±
```python
# backend/app/core/knowledge/graph.py
from neo4j import GraphDatabase

class SecurityKnowledgeGraph:
    def __init__(self, uri, user, password):
        self.driver = GraphDatabase.driver(uri, auth=(user, password))
        
    def add_vulnerability(self, vuln_data: dict):
        with self.driver.session() as session:
            session.write_transaction(self._create_vulnerability, vuln_data)
            
    def _create_vulnerability(self, tx, vuln_data):
        query = """
        MERGE (v:Vulnerability {cve: $cve})
        SET v.description = $description,
            v.severity = $severity,
            v.solution = $solution
        WITH v
        UNWIND $affected_systems as system
        MERGE (s:System {name: system})
        MERGE (s)-[:AFFECTED_BY]->(v)
        """
        tx.run(query, vuln_data)
        
    def get_related_vulnerabilities(self, system_name: str):
        with self.driver.session() as session:
            return session.read_transaction(self._get_vulnerabilities, system_name)
```

#### 6. è‡ªåŠ¨åŒ–åº”æ€¥å“åº”æµç¨‹
```python
# backend/app/core/incident/response.py
from typing import List
import asyncio

class IncidentResponse:
    def __init__(self):
        self.response_steps = []
        self.status = "initialized"
        
    async def handle_incident(self, incident_data: dict):
        self.status = "responding"
        try:
            # 1. å¨èƒéš”ç¦»
            await self.isolate_threat(incident_data)
            
            # 2. è¯æ®æ”¶é›†
            evidence = await self.collect_evidence(incident_data)
            
            # 3. å½±å“è¯„ä¼°
            impact = await self.assess_impact(evidence)
            
            # 4. ä¿®å¤æ‰§è¡Œ
            await self.execute_fix(impact)
            
            # 5. æ¢å¤ç¡®è®¤
            await self.verify_recovery()
            
            self.status = "resolved"
            return {"status": "success", "details": self.response_steps}
            
        except Exception as e:
            self.status = "failed"
            return {"status": "failed", "error": str(e)}
```

### éƒ¨ç½²é…ç½®ç¤ºä¾‹

#### 1. Docker Composeé…ç½®
```yaml
# deploy/docker/docker-compose.yml
version: '3.8'

services:
  frontend:
    build: 
      context: ../../frontend
      dockerfile: Dockerfile
    ports:
      - "3000:80"
    depends_on:
      - backend
      
  backend:
    build:
      context: ../../backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - DB_HOST=db
      - REDIS_HOST=redis
      - RABBITMQ_HOST=rabbitmq
    depends_on:
      - db
      - redis
      - rabbitmq
      
  db:
    image: mysql:8.0
    volumes:
      - mysql_data:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=secure_password
      - MYSQL_DATABASE=wsirp
      
  redis:
    image: redis:6.2
    volumes:
      - redis_data:/data
      
  rabbitmq:
    image: rabbitmq:3.9-management
    ports:
      - "5672:5672"
      - "15672:15672"
      
volumes:
  mysql_data:
  redis_data:
```

#### 2. Kubernetesé…ç½®
```yaml
# deploy/kubernetes/backend-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: wsirp-backend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: wsirp-backend
  template:
    metadata:
      labels:
        app: wsirp-backend
    spec:
      containers:
      - name: wsirp-backend
        image: wsirp-backend:latest
        ports:
        - containerPort: 8000
        resources:
          limits:
            cpu: "1"
            memory: "1Gi"
          requests:
            cpu: "500m"
            memory: "512Mi"
        livenessProbe:
          httpGet:
            path: /health
            port: 8000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 5
```

### Windowså¿«é€Ÿå¯åŠ¨ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰

æˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–é…ç½®è„šæœ¬æ¥ç®€åŒ–Windowsç¯å¢ƒä¸‹çš„éƒ¨ç½²è¿‡ç¨‹ï¼š

1. ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹åŸºç¡€è½¯ä»¶ï¼š
   - Python 3.8+
   - Git
   - MySQL 8.0ï¼ˆå¯é€‰ï¼Œè„šæœ¬ä¼šæ£€æŸ¥ï¼‰
   - Redisï¼ˆå¯é€‰ï¼Œè„šæœ¬ä¼šæ£€æŸ¥ï¼‰

2. æ‰“å¼€PowerShellï¼ˆç®¡ç†å‘˜æƒé™ï¼‰ï¼Œå…è®¸æ‰§è¡Œè„šæœ¬ï¼š
   ```powershell
   Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```

3. è¿è¡Œé…ç½®è„šæœ¬ï¼š
   ```powershell
   .\setup_backend.ps1
   ```

4. æ ¹æ®è„šæœ¬æç¤ºå®Œæˆé…ç½®è¿‡ç¨‹

è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ä»¥ä¸‹ä»»åŠ¡ï¼š
- ç¯å¢ƒæ£€æŸ¥
- è™šæ‹Ÿç¯å¢ƒåˆ›å»º
- ä¾èµ–å®‰è£…
- æœåŠ¡æ£€æŸ¥
- é…ç½®æ–‡ä»¶ç”Ÿæˆ
- æ•°æ®åº“åˆå§‹åŒ–ï¼ˆå¯é€‰ï¼‰
- æœåŠ¡å¯åŠ¨ï¼ˆå¯é€‰ï¼‰
